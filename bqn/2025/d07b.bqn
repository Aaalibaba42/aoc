rawInput â† >â€¢FLines "tst.input"
rayMap â† 'S'= rawInput
splitterMap â† '^'= rawInput

# Propagation must keep in mind the number of universes

# This one still works, if the cell contains 5 universes, next step will still
# be 5 universes
PropagateOnce â† âŒˆâŸœÂ»Ë˜âŒ¾â‰

# This should be adding them
Split â† âŒˆâŸœ(Â«Ë˜+Â»Ë˜)

Propagate â† {
  propagated â† PropagateOnce ğ•©
  splitPoints â† (splitterMap Ã— propagated) Ã— ğ•©

  # TODO: Make the xor not boolean but "arithmetic" to propagate and not lose nb
  splitPoints â‰  propagated Split splitPoints
}

# -2 because last line is computed at the last propagateOnce
â€¢Show paths â† PropagateâŸ(2-Ëœâ‰ ) rayMap

â€¢Show splits â† splitterMap âˆ§ PropagateOnce paths
