s â† â€¢Import "../bqn-libs/strings.bqn"

lines â† â€¢FLines "d06.input"

grid_size â† 1000
grid â† 0â¥ŠËœâ‹ˆËœgrid_size
verbs â† âŸ¨ 2âŠ¸+ â‹„ 1âŠ¸+ â‹„ 0âŒˆ-âŸœ1 âŸ©
verbWords â† âŸ¨ "toggle" â‹„ "on" â‹„ "off" âŸ©

AtoB â† âŠ£+â†•âˆ˜(0âŠ¸âŒˆ-Ëœ)
Selection â† AtoBÂ´Â¨
Normalize â† ("turn"â‰¡âŠ‘)âŠ¸â†“' 'âŠ¸s.Split

# Needs to not be tacit for role change of ğ•¨ -> ğ•
ApplyToGrid â† {ğ•âŒ¾((Selection ğ•©)âŠ¸âŠ)grid}
ParseVerb â† âŠ‘âŸœverbsÂ·verbWordsâŠ¸(<â¼âˆ˜âŠ)âŠ
ParseRange â† 1âŠ¸+âŒ¾(Â¯1âŠ¸âŠ‘)Â¨Â·<Ë˜Â·â‰Â·>Ë˜ 1â€¿3âŠ¸(s.ToNumsÂ¨âˆ˜âŠ)

Solution â† {
  grid â†© (ParseVerb ApplyToGrid ParseRange)âˆ˜Normalize ğ•©
  @
}

SolutionÂ¨ lines
â€¢Show +Â´â¥Šgrid
